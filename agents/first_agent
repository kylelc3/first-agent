import os
import asyncio
from dotenv import load_dotenv
from autogen_agentchat.agents import AssistantAgent
from autogen_ext.models.openai import OpenAIChatCompletionClient


load_dotenv()
api_key = os.getenv("GEMINI_API_KEY")


model_client = OpenAIChatCompletionClient(
    base_url="https://generativelanguage.googleapis.com/v1beta/openai/",
    model="gemini-2.5-flash",
    api_key=api_key
)


assistant = AssistantAgent(
    name="AssistantAgent",
    model_client=model_client,
    description="first agent"
)


async def my_async_function():
    result = await assistant.run(task="Create a 18-day itinerary for a trip to Spain and Portugal.")
    print(result.messages[-1].content)


asyncio.run(my_async_function())
